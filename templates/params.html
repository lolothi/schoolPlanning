{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />

<h1>Paramètres</h1>
<form method="post" action="{{ url_for('mode_edition') }}">
  <button type="submit" class="transparent-button"><img src={{ url_for('static', filename='images/edition.png' )}}
      height="30" /></button>
</form>
<p>Entrer les paramètres pour les calculs</p>

<h2>Enfants</h2>

{%if childsInDb%}
<ul>
  {%for child in childsInDb%}
  {%if not isInEditionMode%}
  <li>{{child[1]}}</li>
  {%else%}
  <li>
    <form method="post" action="{{ url_for('params_update', item_id=child[0]) }}">
      <input type="new_child_name" name="new_child_name" id="new_child_name" class="inputs" value="{{child[1]}}">
      <form method="post" action="{{ url_for('mode_edition') }}">
        <button type="submit" id="submitBtn" class="transparent-button"><img src={{ url_for('static',
            filename='images/verifier.png' )}} height="15" /></button>
      </form>

    </form>
    <form method="post" action="{{ url_for('params_delete', item_id=child[0]) }}">
      <button type="submit" id="submitBtn" class="transparent-button"><img src={{ url_for('static',
          filename='images/supprimer.png' )}} height="15" /></button>
    </form>
  </li>
  {%endif%}
  {%endfor%}
</ul>
{%endif%}

{%if not isInEditionMode%}
<form method="post">
  <label for="child_name">Prénom*</label>
  <input type="child_name" name="child_name" id="child_name" class="inputs" required><br>
  <input type="submit" id="submitBtn" value="valider">
  <br />
  {% if message %}
  <a class="message">{{message}}</a>
  {% endif %}
  <br />
  {% if error %}
  <p class="errorAuth">{{error}}</p>
  {% endif %}
  <br />
</form>
{% endif %}
<br>

<h2>Activités</h2>
{%if activitiesInDb%}
<ul>
  {%for activity in activitiesInDb%}
  <li><strong>{{activity[1]}}</strong> - {{activity[2]}}€/jour - {{activity[3]}}h/jour - <a>comment: {{ activity[4]
      }}</a></li>
  {%endfor%}
</ul>
{%endif%}
<form method="post">
  <label for="activity_name">Nom*: </label>
  <input type="text" name="activity_name" id="activity_name" class="inputs" required><br>
  <label for="activity_price">Tarif/Jour*: </label>
  <input type="text" name="activity_price" id="activity_price" class="inputs" required><br>
  <label for="activity_time">Durée(h): </label>
  <input type="number" name="activity_time" id="activity_time" class="inputs"><br>
  <label for="activity_comment">Commentaire: </label>
  <input type="text" name="activity_comment" id="activity_comment" class="inputs"><br>
  <input type="submit" id="submitBtn" value="valider">
  <br />
  {% if message %}
  <a class="message">{{message}}</a>
  {% endif %}
  <br />
  {% if error %}
  <p class="errorAuth">{{error}}</p>
  {% endif %}
  <br />
</form><br>

<h2>Activités habituelles</h2>
{%if usual_activities_in_DB%}
<ul>
  {%for day, usual_activity_day in usual_activities_in_DB%}
  <li><strong>{{ Jour(stringToNumber(day)).name }} : </strong></a>
    {% set activities_list = usual_activity_day.split(',') %}
    {%for usual_activity in activities_list%}
    <a>{{activitiesInDb[stringToNumber(usual_activity)-1][1]}},</a>

    {%endfor%}
  </li>
  {%endfor%}
</ul>
{%endif%}

<form method="POST">
  <select name="activity_day">
    <option value="0">-- jour* --</option>
    {% for jour in Jour %}
    <option value="{{ jour.value }}">{{ jour.name }}</option>
    {% endfor %}
  </select>
  <select name="usual_activity">
    <option value="0">-- activité* --</option>
    {%for usual_activity in activitiesInDb%}
    <option value="{{ usual_activity[0] }}">{{ usual_activity[1] }}</option>
    {% endfor %}
  </select>
  <input type="submit" id="submitBtn" value="valider">
</form><br>

<h2>Jours fériés</h2>
<!-- {%if activitiesInDb%} -->
<ul>
  {%for key, value in JoursFeriesAnneeEnCours.items()%}
  <li><strong>{{key}}</strong> - {{value}}</a></li>
  {%endfor%}
</ul>
<!-- {%endif%} -->
<form method="post">
  <!-- <label for="activity_name">Nom*: </label>
  <input type="text" name="activity_name" id="activity_name" class="inputs" required><br>
  <label for="activity_price">Tarif/Jour*: </label>
  <input type="text" name="activity_price" id="activity_price" class="inputs" required><br>
  <label for="activity_time">Durée(h): </label>
  <input type="number" name="activity_time" id="activity_time" class="inputs"><br>
  <label for="activity_comment">Commentaire: </label>
  <input type="text" name="activity_comment" id="activity_comment" class="inputs"><br>
  <input type="submit" id="submitBtn" value="valider">
  <br />
  {% if message %}
  <a class="message">{{message}}</a>
  {% endif %}
  <br />
  {% if error %}
  <p class="errorAuth">{{error}}</p>
  {% endif %}
  <br /> -->
</form>



{% endblock %}